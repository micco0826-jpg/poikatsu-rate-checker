<!doctype html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ポイ活 単価換算ツール｜便利</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="wrap">
    <div class="hero">
      <div>
        <h1>ポイ活 単価換算ツール</h1>
        <div class="lead">サイトごとの最低換金ptと金額から1pt単価を算出。 1回あたりの“よく貰えるpt（2つ）”も円で一目でわかる。</div>
      </div>
    </div>

    <div class="card" style="margin-bottom:12px">
      <span class="pill">新規追加</span>
      <div style="height:8px"></div>
      <div class="form-grid">
        <div>
          <label>サイト名</label>
          <input id="site" type="text" placeholder="例: ハピタス">
        </div>
        <div>
          <label>最低換金ポイント</label>
          <input id="minpt" type="number" min="0" step="1" placeholder="例: 300">
        </div>
        <div>
          <label>換金額(円)</label>
          <input id="yen" type="number" min="0" step="1" placeholder="例: 300">
        </div>
        <div>
          <label>よく使うpt①</label>
          <input id="p1" type="number" min="1" step="1" placeholder="例: 60">
        </div>
        <div>
          <label>よく使うpt②</label>
          <input id="p2" type="number" min="1" step="1" placeholder="例: 120">
        </div>
        <div class="full">
          <label>メモ</label>
          <textarea id="memo" rows="2" placeholder="例: 歩数アプリ、等価交換など"></textarea>
        </div>
        <div>
          <label>&nbsp;</label>
          <button id="addBtn" class="btn" onclick="add()">追加</button>
        </div>
        <div class="full">
          <div class="hint">例：最低300pt→300円なら 1pt=1.0円。広告1回で60ptなら 60円。</div>
        </div>
      </div>
    </div>

    <div class="card table-wrap">
      <table id="tbl">
        <thead>
          <tr>
            <th class="sortable" data-k="site">サイト名<span class="sort-ind"></span></th>
            <th class="right sortable" data-k="minpt">最低換金pt<span class="sort-ind"></span></th>
            <th class="right sortable" data-k="yen">換金額(円)<span class="sort-ind"></span></th>
            <th class="right sortable" data-k="unit">1pt(円)<span class="sort-ind"></span></th>
            <th class="right sortable" data-k="p1">pt①<span class="sort-ind"></span></th>
            <th class="right sortable" data-k="yen1">pt①→円<span class="sort-ind"></span></th>
            <th class="right sortable" data-k="p2">pt②<span class="sort-ind"></span></th>
            <th class="right sortable" data-k="yen2">pt②→円<span class="sort-ind"></span></th>
            <th>メモ</th>
            <th class="action-col"></th>
            <th></th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
 <colgroup>
  <col style="width:13.5%"> <!-- サイト名 -->
  <col style="width:11.5%"> <!-- 最低換金pt -->
  <col style="width:11.5%"> <!-- 換金額 -->
  <col style="width:10.5%"> <!-- 1pt(円) -->
  <col style="width:9.5%">  <!-- pt① -->
  <col style="width:9.5%">  <!-- pt①→円 -->
  <col style="width:9.5%">  <!-- pt② -->
  <col style="width:9.5%">  <!-- pt②→円 -->
  <col style="width:14.5%"> <!-- メモ -->
  <col style="width:4%">    <!-- 編集/削除 -->
</colgroup>

    <div class="card" style="margin:12px 0 0">
      <span class="pill">データ操作</span>
      <div style="height:8px"></div>
      <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
        <!-- 既存 -->
        <button class="btn ghost" onclick="exportCSV()">CSV出力</button>
        <div class="file-input">
          <button class="btn ghost" id="csvBtn">CSV読み込み</button>
          <input id="csv" type="file" accept=".csv,text/csv" style="display:none">
        </div>
        <!-- ★ 追加：JSONバックアップ／復元 -->
        <button class="btn ghost" onclick="exportJSON()">JSON出力</button>
        <div class="file-input">
          <button class="btn ghost" id="jsonBtn">JSON読み込み</button>
          <input id="json" type="file" accept="application/json,.json" style="display:none">
        </div>
        <button class="btn warn" onclick="resetAll()">全削除</button>
      </div>
      <div class="hint">CSVは <code>サイト名,最低換金ポイント,換金額,pt1,pt2,メモ</code> の順で入出力します。JSONはレートと換金記録をまとめて保存・復元します。</div>
    </div>

    <div class="footer">©みこ</div>
  </div>
  <script src="app.js"></script>
  <div id="toast" class="toast" aria-live="polite"></div>
</body>

</html>